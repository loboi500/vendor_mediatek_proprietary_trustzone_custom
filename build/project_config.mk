# backup current project options
my_tee_options := \
  MTK_ATF_SUPPORT \
  MTK_TEE_SUPPORT \
  MTK_IN_HOUSE_TEE_SUPPORT \
  MTK_IN_HOUSE_TEE_FORCE_32_SUPPORT \
  TRUSTONIC_TEE_SUPPORT \
  MICROTRUST_TEE_SUPPORT \
  MTK_GOOGLE_TRUSTY_SUPPORT \
  TRUSTKERNEL_TEE_SUPPORT \
  WATCHDATA_TEE_SUPPORT
$(foreach v,$(my_tee_options),\
  $(eval __STASHED_$(v) := $($(v)))\
)

TRUSTZONE_PROJECT_MAKEFILE := $(TRUSTZONE_CUSTOM_BUILD_PATH)/project/common.mk

ifdef TARGET_BOARD_PLATFORM
TRUSTZONE_PROJECT_MAKEFILE += $(TRUSTZONE_CUSTOM_BUILD_PATH)/project/$(TARGET_BOARD_PLATFORM).mk
else
ifdef MTK_PLATFORM_DIR
TRUSTZONE_PROJECT_MAKEFILE += $(TRUSTZONE_CUSTOM_BUILD_PATH)/project/$(MTK_PLATFORM_DIR).mk
endif
endif
ifdef TRUSTZONE_TARGET_PROJECT
TRUSTZONE_PROJECT_MAKEFILE += $(TRUSTZONE_CUSTOM_BUILD_PATH)/project/$(TRUSTZONE_TARGET_PROJECT).mk
else
ifdef MTK_BASE_PROJECT
TRUSTZONE_PROJECT_MAKEFILE += $(TRUSTZONE_CUSTOM_BUILD_PATH)/project/$(MTK_BASE_PROJECT).mk
endif
ifdef MTK_TARGET_PROJECT
ifneq ($(MTK_BASE_PROJECT),$(MTK_TARGET_PROJECT))
TRUSTZONE_PROJECT_MAKEFILE += $(TRUSTZONE_CUSTOM_BUILD_PATH)/project/$(MTK_TARGET_PROJECT).mk
endif
endif
endif#TRUSTZONE_TARGET_PROJECT
TRUSTZONE_PROJECT_MAKEFILE := $(wildcard $(TRUSTZONE_PROJECT_MAKEFILE))

$(info including $(TRUSTZONE_PROJECT_MAKEFILE) ...)
include $(TRUSTZONE_PROJECT_MAKEFILE)

# restore current project options
$(foreach v,$(my_tee_options),\
  $(eval $(v) := $(__STASHED_$(v)))\
)
